/*! For license information please see app.bundle.js.LICENSE.txt */
(()=>{"use strict";const t={BASE_URL:"https://story-api.dicoding.dev/v1",BASE_IMAGE_URL:"https://story-api.dicoding.dev/images",DEFAULT_LANGUAGE:"id-id",AUTH_KEY:"storyapp_auth",MAP_TILE_URL:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",MAP_ATTRIBUTION:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> kontributor',DEFAULT_MAP_CENTER:[-6.175,106.8275],DEFAULT_MAP_ZOOM:13};function e(){e=function(){return n};var t,n={},o=Object.prototype,i=o.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function h(e,r,n,o){var i=r&&r.prototype instanceof d?r:d,a=Object.create(i.prototype);return l(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=x(u,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=h;var p={};function d(){}function v(){}function y(){}var m={};l(m,u,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(O([])));w&&w!==o&&i.call(w,u)&&(m=w);var b=y.prototype=d.prototype=Object.create(m);function E(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(o,a,u,s){var c=f(t[o],t,a);if("throw"!==c.type){var l=c.arg,h=l.value;return h&&"object"==r(h)&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,u,s)}),(function(t){n("throw",t,u,s)})):e.resolve(h).then((function(t){l.value=t,u(l)}),(function(t){return n("throw",t,u,s)}))}s(c.arg)}var o;l(this,"_invoke",(function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function x(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,x(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,p;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(t){this.tryEntries.push(t)}function S(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(_,this),this.reset(!0)}function O(e){if(null!=e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return v.prototype=y,l(b,"constructor",y),l(y,"constructor",v),v.displayName=l(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},n.awrap=function(t){return{__await:t}},E(k.prototype),l(k.prototype,s,(function(){return this})),n.AsyncIterator=k,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new k(h(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(b),l(b,c,"Generator"),l(b,u,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},n.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],p):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),S(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:O(e),r,n},"next"===this.method&&(this.arg=t),p}},n}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={register:"".concat(t.BASE_URL,"/register"),login:"".concat(t.BASE_URL,"/login"),stories:"".concat(t.BASE_URL,"/stories"),detail:function(e){return"".concat(t.BASE_URL,"/stories/").concat(e)}},c=function(){var e=localStorage.getItem(t.AUTH_KEY);return e?JSON.parse(e).token:null},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=c();return e?a(a({},t),{},{Authorization:"Bearer ".concat(e)}):t};function h(t){return f.apply(this,arguments)}function f(){return(f=o(e().mark((function t(r){var n,o,i,a,u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.name,o=r.email,i=r.password,t.next=3,fetch(s.register,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:o,password:i})});case 3:return a=t.sent,t.next=6,a.json();case 6:if(u=t.sent,a.ok){t.next=9;break}throw new Error(u.message);case 9:return t.abrupt("return",u);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return d.apply(this,arguments)}function d(){return(d=o(e().mark((function t(r){var n,o,i,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.email,o=r.password,t.next=3,fetch(s.login,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})});case 3:return i=t.sent,t.next=6,i.json();case 6:if(a=t.sent,i.ok){t.next=9;break}throw new Error(a.message);case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=o(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(s.stories,"?location=1"),{headers:l()});case 2:return r=t.sent,t.next=5,r.json();case 5:if(n=t.sent,r.ok){t.next=8;break}throw new Error(n.message);case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return g.apply(this,arguments)}function g(){return(g=o(e().mark((function t(r){var n,o;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(s.detail(r),{headers:l()});case 2:return n=t.sent,t.next=5,n.json();case 5:if(o=t.sent,n.ok){t.next=8;break}throw new Error(o.message);case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return b.apply(this,arguments)}function b(){return(b=o(e().mark((function t(r){var n,o,i,a,u,c,h;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.description,o=r.photo,i=r.lat,a=r.lon,(u=new FormData).append("description",n),u.append("photo",o),i&&a&&(u.append("lat",i),u.append("lon",a)),t.next=7,fetch(s.stories,{method:"POST",headers:l(),body:u});case 7:return c=t.sent,t.next=10,c.json();case 10:if(h=t.sent,c.ok){t.next=13;break}throw new Error(h.message);case 13:return t.abrupt("return",h);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t){return new Date(t).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function x(){x=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new j(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(O([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==k(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function _(t){this.tryEntries.push(t)}function S(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function j(t){this.tryEntries=[[-1]],t.forEach(_,this),this.reset(!0)}function O(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(k(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=O,j.prototype={constructor:j,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;S(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:O(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function _(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,j(n.key),n)}}function j(t){var e=function(t){if("object"!=k(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}const O=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storiesContainerId="stories-container",this.storiesContainer=null},e=[{key:"render",value:(r=x().mark((function t(){var e;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!!c(),t.abrupt("return",'\n      <section class="container">\n        <h1 tabindex="0">Cerita Dari Seluruh Dunia</h1>\n\n        '.concat(e?'\n          <div id="'.concat(this.storiesContainerId,'" class="stories-container">\n            </div>\n        '):'\n          <div class="text-center mt-4" id="login-prompt">\n            <p>Silakan login untuk melihat dan membagikan cerita</p>\n            <a href="#/login" class="btn btn-accent mt-2">Login Sekarang</a>\n          </div>\n        ',"\n      </section>\n    "));case 2:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){_(i,n,o,a,u,"next",t)}function u(t){_(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"_getStoriesContainer",value:function(){return this.storiesContainer||(this.storiesContainer=document.getElementById(this.storiesContainerId)),this.storiesContainer}},{key:"showLoading",value:function(){var t=this._getStoriesContainer();t&&(t.innerHTML='\n        <div class="loading" style="display: flex; justify-content: center; align-items: center; min-height: 200px;">\n          <div class="loading-spinner"></div>\n        </div>\n      ')}},{key:"hideLoading",value:function(){}},{key:"displayStories",value:function(t){var e=this,r=this._getStoriesContainer();r&&(r.innerHTML="",t&&0!==t.length?t.forEach((function(t){var n=e._createStoryCardElement(t);r.appendChild(n)})):this.showEmpty())}},{key:"_createStoryCardElement",value:function(t){var e=document.createElement("article");return e.className="story-card",e.innerHTML='\n      <div class="story-image-container">\n        <img\n          src="'.concat(t.photoUrl,'"\n          alt="Gambar cerita oleh ').concat(t.name||"Anonim",'"\n          class="story-image"\n          loading="lazy"\n        />\n      </div>\n      <div class="story-content">\n        <h2 class="story-name" tabindex="0">').concat(t.name||"Tanpa Nama",'</h2>\n        <p class="story-date">').concat(E(t.createdAt),'</p>\n        <p class="story-desc">').concat(t.description||"Tanpa Deskripsi","</p>\n        ").concat(null!=t.lat&&null!=t.lon?'\n          <div class="story-location">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>\n              <circle cx="12" cy="10" r="3"></circle>\n            </svg>\n            Lokasi: '.concat(Number(t.lat).toFixed(4),", ").concat(Number(t.lon).toFixed(4),"\n          </div>\n        "):"",'\n        <a href="#/detail/').concat(t.id,'" class="read-more">Baca selengkapnya</a>\n      </div>\n    '),e}},{key:"showError",value:function(t){var e=this._getStoriesContainer();e&&(e.innerHTML='\n        <div class="error-container" style="padding: 20px; text-align: center;">\n          <h2>Gagal Memuat Cerita</h2>\n          <p>'.concat(t||"Terjadi kesalahan tidak diketahui.","</p>\n        </div>\n      "))}},{key:"showEmpty",value:function(){var t=this._getStoriesContainer();t&&(t.innerHTML='\n        <div class="text-center" style="padding: 20px;">\n          <p>Tidak ada cerita ditemukan. Jadilah yang pertama membagikan cerita!</p>\n          <a href="#/add" class="btn btn-accent mt-2">Tambah Cerita</a>\n        </div>\n      ')}},{key:"afterRender",value:function(){this.storiesContainer=document.getElementById(this.storiesContainerId)}}],e&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function T(){T=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==P(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(P(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function I(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,G(n.key),n)}}function G(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}const N=function(){return e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.containerId="detail-container",this.mapContainerId="map-detail",this.containerElement=null},r=[{key:"render",value:(n=T().mark((function t(){return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <div id="'.concat(this.containerId,'" class="detail-container">\n          </div>\n      </section>\n    '));case 1:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){I(i,r,o,a,u,"next",t)}function u(t){I(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"_getContainer",value:function(){return this.containerElement||(this.containerElement=document.getElementById(this.containerId)),this.containerElement}},{key:"showLoading",value:function(){var t=this._getContainer();t&&(t.innerHTML='\n        <div class="loading" style="display: flex; justify-content: center; align-items: center; min-height: 200px;">\n          <div class="loading-spinner"></div>\n        </div>\n      ')}},{key:"hideLoading",value:function(){}},{key:"displayStoryDetail",value:function(t){var e=this._getContainer();if(!e||!t)return this.showError("Data cerita tidak valid."),!1;var r='\n      <div class="detail-header">\n        <h1 class="detail-name" tabindex="0">'.concat(t.name||"Tanpa Nama",'</h1>\n        <p class="detail-date">').concat(E(t.createdAt),'</p>\n      </div>\n\n      <img\n        src="').concat(t.photoUrl,'"\n        alt="Gambar cerita oleh ').concat(t.name||"Anonim",'"\n        class="detail-image"\n        loading="lazy"\n      />\n\n      <div class="detail-description">\n        <p>').concat(t.description||"Tanpa Deskripsi","</p>\n      </div>\n\n      ").concat(null!=t.lat&&null!=t.lon?'<div class="map-container mt-3" id="'.concat(this.mapContainerId,'"></div>'):"",'\n\n      <div class="mt-3">\n        <a href="#/" class="btn">&larr; Kembali ke Daftar Cerita</a>\n      </div>\n    ');return e.innerHTML=r,null!=t.lat&&null!=t.lon}},{key:"displayMap",value:function(e){if("undefined"!=typeof L){if(null!=e.lat&&null!=e.lon){var r=document.getElementById(this.mapContainerId);if(r)try{var n=L.map(this.mapContainerId).setView([e.lat,e.lon],13);L.tileLayer(t.MAP_TILE_URL,{attribution:t.MAP_ATTRIBUTION,maxZoom:19}).addTo(n),L.marker([e.lat,e.lon]).addTo(n).bindPopup("<b>".concat(e.name||"Lokasi Cerita","</b><br>").concat(e.description.substring(0,50),"...")).openPopup()}catch(t){console.error("Error initializing detail map:",t),r.innerHTML="<p style='color:red;'>Gagal memuat peta lokasi.</p>"}else console.warn("Map container #".concat(this.mapContainerId," not found in DOM."))}}else console.error("Leaflet (L) is not defined. Make sure it's loaded.")}},{key:"showError",value:function(t){var e=this._getContainer();e&&(e.innerHTML='\n        <div class="error-container" style="padding: 20px; text-align: center;">\n          <h2>Gagal Memuat Detail Cerita</h2>\n          <p>'.concat(t||"Terjadi kesalahan tidak diketahui.",'</p>\n          <a href="#/" class="btn mt-2">&larr; Kembali</a>\n        </div>\n      '))}},{key:"afterRender",value:function(){this.containerElement=document.getElementById(this.containerId)}}],r&&C(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,o}();function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function M(){M=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==B(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(B(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function A(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D(n.key),n)}}function D(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}const U=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.formId="add-story-form",this.descId="description",this.previewId="camera-preview",this.startCamId="camera-start",this.captureCamId="camera-capture",this.retakeCamId="camera-retake",this.fileInputId="file-input",this.mapId="map-add",this.locationDisplayId="location-display",this.latInputId="lat-input",this.lonInputId="lon-input",this.submitBtnId="submit-button",this.errorMsgId="add-error-message",this.form=null,this.descriptionInput=null,this.previewElement=null,this.startCamButton=null,this.captureCamButton=null,this.retakeCamButton=null,this.fileInput=null,this.locationDisplay=null,this.latInput=null,this.lonInput=null,this.submitButton=null,this.errorElement=null,this.map=null,this.marker=null,this.geocoder=null},e=[{key:"render",value:(r=M().mark((function t(){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n          <section class="container">\n            <div class="form-container">\n              <h1 class="form-title" tabindex="0">Tambah Cerita Baru</h1>\n              <form id="'.concat(this.formId,'">\n                <div class="form-group">\n                  <label for="').concat(this.descId,'" class="form-label">Deskripsi *</label>\n                  <textarea id="').concat(this.descId,'" class="form-textarea" placeholder="Tulis cerita Anda..." required></textarea>\n                </div>\n\n                <div class="form-group">\n                  <label class="form-label">Foto *</label>\n                  <div class="camera-container">\n                    <div class="camera-preview" id="').concat(this.previewId,'">\n                      <p>Pratinjau kamera/gambar akan muncul di sini</p>\n                    </div>\n                    <div class="camera-controls">\n                      <button type="button" id="').concat(this.startCamId,'" class="btn">Mulai Kamera</button>\n                      <button type="button" id="').concat(this.captureCamId,'" class="btn" disabled>Ambil Foto</button>\n                      <button type="button" id="').concat(this.retakeCamId,'" class="btn" disabled>Ulangi/Hapus</button>\n                    </div>\n                  </div>\n                  <div class="mt-2">\n                    <label for="').concat(this.fileInputId,'" class="form-label">Atau pilih file foto</label>\n                    <input type="file" id="').concat(this.fileInputId,'" accept="image/*" class="form-input"/>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label class="form-label">Pilih Lokasi (Klik peta / Cari)</label>\n                  <div id="').concat(this.mapId,'" class="map-container" style="height: 300px;"></div>\n                  <p id="').concat(this.locationDisplayId,'" class="mt-1">Belum ada lokasi yang dipilih</p>\n                </div>\n\n                <div class="form-group">\n                  <label class="form-label">Koordinat Manual</label>\n                  <div class="coord-inputs" style="display: flex; gap: 10px;">\n                    <input type="number" id="').concat(this.latInputId,'" class="form-input" placeholder="Lintang" step="any" style="flex: 1;"/>\n                    <input type="number" id="').concat(this.lonInputId,'" class="form-input" placeholder="Bujur" step="any" style="flex: 1;"/>\n                  </div>\n                </div>\n\n                <div id="').concat(this.errorMsgId,'" class="form-group" style="color: red; display: none;">\n                </div>\n\n\n                <div class="form-group">\n                  <button type="submit" id="').concat(this.submitBtnId,'" class="btn btn-block btn-accent">Unggah Cerita</button>\n                </div>\n              </form>\n            </div>\n          </section>\n        '));case 1:case"end":return t.stop()}}),t,this)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){A(i,n,o,a,u,"next",t)}function u(t){A(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"_getElements",value:function(){this.form=document.getElementById(this.formId),this.descriptionInput=document.getElementById(this.descId),this.previewElement=document.getElementById(this.previewId),this.startCamButton=document.getElementById(this.startCamId),this.captureCamButton=document.getElementById(this.captureCamId),this.retakeCamButton=document.getElementById(this.retakeCamId),this.fileInput=document.getElementById(this.fileInputId),this.locationDisplay=document.getElementById(this.locationDisplayId),this.latInput=document.getElementById(this.latInputId),this.lonInput=document.getElementById(this.lonInputId),this.submitButton=document.getElementById(this.submitBtnId),this.errorElement=document.getElementById(this.errorMsgId)}},{key:"bindEvents",value:function(t){var e,r,n,o,i,a,u,s=this;this._getElements(),null===(e=this.startCamButton)||void 0===e||e.addEventListener("click",(function(){return t.onStartCamera()})),null===(r=this.captureCamButton)||void 0===r||r.addEventListener("click",(function(){return t.onCapturePhoto()})),null===(n=this.retakeCamButton)||void 0===n||n.addEventListener("click",(function(){return t.onRetakePhoto()})),null===(o=this.fileInput)||void 0===o||o.addEventListener("change",(function(e){e.target.files&&e.target.files[0]&&t.onFileSelected(e.target.files[0])})),null===(i=this.form)||void 0===i||i.addEventListener("submit",(function(e){e.preventDefault(),t.onFormSubmit()})),null===(a=this.latInput)||void 0===a||a.addEventListener("change",(function(){return s._notifyCoordsChanged(t)})),null===(u=this.lonInput)||void 0===u||u.addEventListener("change",(function(){return s._notifyCoordsChanged(t)}))}},{key:"_notifyCoordsChanged",value:function(t){var e=parseFloat(this.latInput.value),r=parseFloat(this.lonInput.value);isNaN(e)||isNaN(r)||t.onCoordsChanged(e,r)}},{key:"showCameraPreview",value:function(t){var e=this;if(this.previewElement&&this.captureCamButton){this._revokePreviewURL();var r=document.createElement("video");r.srcObject=t,r.setAttribute("playsinline","true"),r.muted=!0,r.addEventListener("loadedmetadata",(function(){console.log("Video metadata loaded. Enabling capture button."),e.captureCamButton.disabled=!1,r.play().catch((function(t){return console.error("Error playing video:",t)}))})),r.addEventListener("error",(function(t){console.error("Error playing video:",t),e.showError("Gagal memutar pratinjau kamera."),e.captureCamButton.disabled=!0})),this.previewElement.innerHTML="",this.previewElement.appendChild(r),r.play().catch((function(t){console.warn("Initial video play failed (may need user interaction):",t)}))}else console.error("Preview element or capture button not found in showCameraPreview")}},{key:"showImagePreview",value:function(t){if(this.previewElement){this._revokePreviewURL();var e=document.createElement("img");e.src=t,e.style.maxWidth="100%",e.style.maxHeight="100%",e.alt="Pratinjau Gambar",this.previewElement.innerHTML="",this.previewElement.appendChild(e)}}},{key:"_revokePreviewURL",value:function(){if(this.previewElement){var t=this.previewElement.querySelector("img, video");t&&t.src&&t.src.startsWith("blob:")&&(console.log("Revoking old preview URL:",t.src),URL.revokeObjectURL(t.src)),t&&t.srcObject}}},{key:"clearPreview",value:function(){this.previewElement&&(this._revokePreviewURL(),this.previewElement.innerHTML="<p>Pratinjau kamera/gambar akan muncul di sini</p>"),this.fileInput&&(this.fileInput.value="")}},{key:"setCameraButtonsState",value:function(t){var e,r,n=t.start,o=t.capture,i=t.retake;this.startCamButton&&(this.startCamButton.disabled=!n),this.captureCamButton&&(this.captureCamButton.disabled=!o),this.retakeCamButton&&(this.retakeCamButton.disabled=!i);var a=null===(e=this.previewElement)||void 0===e?void 0:e.querySelector("video"),u=null===(r=this.previewElement)||void 0===r?void 0:r.querySelector("img");this.retakeCamButton&&(this.retakeCamButton.textContent=!a&&u?"Hapus Gambar":"Ulangi/Hapus")}},{key:"initializeMap",value:function(t,e,r,n){if("undefined"==typeof L)return console.error("Leaflet (L) not defined."),void this.showError("Gagal memuat Peta (Leaflet tidak ditemukan).");var o=document.getElementById(this.mapId);if(o){this.map&&(console.log("Removing previous map instance."),this.map.off(),this.map.remove(),this.map=null);try{console.log("Initializing map in container:",this.mapId),this.map=L.map(o).setView(t,e),L.tileLayer(r,{attribution:n,maxZoom:19}).addTo(this.map),console.log("Map initialized successfully.")}catch(t){console.error("Failed to initialize map:",t),o.innerHTML="<p style='color: red'>Gagal memuat peta.</p>",this.showError("Gagal memuat peta: ".concat(t.message))}}else console.error("Map container not found")}},{key:"addMapClickListener",value:function(t){this.map?(this.map.off("click"),this.map.on("click",(function(e){return t(e.latlng.lat,e.latlng.lng)})),console.log("Map click listener added.")):console.warn("Attempted to add map click listener before map was initialized.")}},{key:"addGeocoder",value:function(t){if(this.map){if(void 0===L.Control.Geocoder)return console.error("Leaflet Geocoder plugin not found."),void this.showError("Fitur pencarian lokasi tidak tersedia.");if(this.geocoder&&this.map.removeControl){try{this.map.removeControl(this.geocoder),console.log("Removed old geocoder control.")}catch(t){console.warn("Could not remove old geocoder control:",t)}this.geocoder=null}try{this.geocoder=L.Control.geocoder({collapsed:!1,placeholder:"Cari nama tempat...",defaultMarkGeocode:!1,errorMessage:"Pencarian tidak ditemukan."}).addTo(this.map),this.geocoder.off("markgeocode"),this.geocoder.on("markgeocode",(function(e){if(e.geocode&&e.geocode.center){var r=e.geocode.center,n=r.lat,o=r.lng;t(n,o)}else console.warn("Geocode event did not contain center coordinates:",e)})),console.log("Geocoder added successfully.")}catch(t){console.error("Failed to add Geocoder:",t),this.showError("Gagal menambahkan fitur pencarian: ".concat(t.message))}}else console.warn("Attempted to add geocoder before map was initialized.")}},{key:"updateMapLocation",value:function(t,e,r){if(this.map){var n=L.latLng(t,e),o=null!=r?r:this.map.getZoom();this.map.setView(n,o),this.marker?this.marker.setLatLng(n):this.marker=L.marker(n).addTo(this.map)}else console.warn("Attempted to update map location before map was initialized.")}},{key:"updateLocationDisplay",value:function(t){this.locationDisplay&&(this.locationDisplay.textContent=t)}},{key:"updateCoordInputs",value:function(t,e){this.latInput&&(this.latInput.value=null!=t?t.toFixed(7):""),this.lonInput&&(this.lonInput.value=null!=e?e.toFixed(7):"")}},{key:"getDescription",value:function(){return this.descriptionInput?this.descriptionInput.value.trim():""}},{key:"showLoading",value:function(){this.submitButton&&(this.submitButton.disabled=!0,this.submitButton.innerHTML='\n        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n        Mengunggah...')}},{key:"hideLoading",value:function(){this.submitButton&&(this.submitButton.disabled=!1,this.submitButton.textContent="Unggah Cerita",this.submitButton.innerHTML="Unggah Cerita")}},{key:"showError",value:function(t){this.errorElement?(this.errorElement.textContent=t,this.errorElement.style.display="block",this.errorElement.scrollIntoView({behavior:"smooth",block:"center"})):(console.error("Error element not found, falling back to alert:",t),alert(t))}},{key:"clearError",value:function(){this.errorElement&&(this.errorElement.textContent="",this.errorElement.style.display="none")}},{key:"navigateToHome",value:function(){console.log("Navigating to home (#/)"),window.location.hash="#/"}},{key:"cleanup",value:function(){if(console.log("AddView cleanup initiated."),this.map){if(console.log("Cleaning up map listeners and controls."),this.map.off(),this.geocoder&&this.map.removeControl)try{this.map.removeControl(this.geocoder),console.log("Geocoder control removed during cleanup."),this.geocoder=null}catch(t){console.warn("Could not remove geocoder during cleanup:",t)}this.marker&&(this.marker.remove(),this.marker=null,console.log("Marker removed during cleanup."))}this._revokePreviewURL(),console.log("AddView cleanup finished.")}},{key:"afterRender",value:function(){console.log("AddView afterRender: getting elements."),this._getElements()}}],e&&F(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function V(){V=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==R(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(R(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function H(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,K(n.key),n)}}function K(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}const q=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=null,this.emailInput=null,this.passwordInput=null,this.submitButton=null,this.errorElement=null},e=[{key:"render",value:(r=V().mark((function t(){return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n        <section class="container">\n          <div class="form-container">\n            <h1 class="form-title" tabindex="0">Masuk</h1>\n  \n            <form id="login-form">\n              <div class="form-group">\n                <label for="email" class="form-label">Email</label>\n                <input\n                  type="email"\n                  id="email"\n                  class="form-input"\n                  placeholder="Masukkan email Anda"\n                  required\n                  aria-required="true"\n                />\n              </div>\n  \n              <div class="form-group">\n                <label for="password" class="form-label">Kata Sandi</label>\n                <input\n                  type="password"\n                  id="password"\n                  class="form-input"\n                  placeholder="Masukkan kata sandi Anda"\n                  required\n                  aria-required="true"\n                />\n              </div>\n  \n              <div id="error-message" class="form-group" style="color: red; display: none;">\n                </div>\n  \n              <div class="form-group">\n                <button type="submit" id="submit-button" class="btn btn-block">Masuk</button>\n              </div>\n  \n              <p class="text-center mt-2">\n                Belum punya akun? <a href="#/register">Daftar di sini</a>\n              </p>\n            </form>\n          </div>\n        </section>\n      ');case 1:case"end":return t.stop()}}),t)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){H(i,n,o,a,u,"next",t)}function u(t){H(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"bindEvents",value:function(t){this.form=document.getElementById("login-form"),this.emailInput=document.getElementById("email"),this.passwordInput=document.getElementById("password"),this.submitButton=document.getElementById("submit-button"),this.errorElement=document.getElementById("error-message"),this.form&&this.form.addEventListener("submit",(function(e){e.preventDefault(),t.onLoginSubmit()}))}},{key:"getFormData",value:function(){return{email:this.emailInput?this.emailInput.value:"",password:this.passwordInput?this.passwordInput.value:""}}},{key:"showLoading",value:function(){this.submitButton&&(this.submitButton.disabled=!0,this.submitButton.textContent="Sedang masuk...")}},{key:"hideLoading",value:function(){this.submitButton&&(this.submitButton.disabled=!1,this.submitButton.textContent="Masuk")}},{key:"showError",value:function(t){this.errorElement&&(this.errorElement.textContent=t,this.errorElement.style.display="block")}},{key:"clearError",value:function(){this.errorElement&&(this.errorElement.textContent="",this.errorElement.style.display="none")}},{key:"navigateToHome",value:function(){window.location.hash="#/",window.location.reload()}},{key:"afterRender",value:function(){}}],e&&z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function Y(){Y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==W(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(W(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function J(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function Q(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}const $=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=null,this.nameInput=null,this.emailInput=null,this.passwordInput=null,this.submitButton=null},e=[{key:"render",value:(r=Y().mark((function t(){return Y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n      <section class="container">\n        <div class="form-container">\n          <h1 class="form-title" tabindex="0">Daftar Akun</h1>\n          <form id="register-form">\n            <div class="form-group">\n              <label for="name" class="form-label">Nama Lengkap</label>\n              <input type="text" id="name" class="form-input" placeholder="Masukkan nama lengkap Anda" required />\n            </div>\n            <div class="form-group">\n              <label for="email" class="form-label">Email</label>\n              <input type="email" id="email" class="form-input" placeholder="Masukkan email Anda" required />\n            </div>\n            <div class="form-group">\n              <label for="password" class="form-label">Kata Sandi</label>\n              <input type="password" id="password" class="form-input" placeholder="Masukkan kata sandi (min. 8 karakter)" required minlength="8" />\n            </div>\n            <div class="form-group">\n              <button type="submit" id="submit-button" class="btn btn-block">Daftar</button>\n            </div>\n            <p class="text-center mt-2">\n              Sudah punya akun? <a href="#/login">Masuk di sini</a>\n            </p>\n          </form>\n          <div id="error-message" style="color: red; margin-top: 10px;"></div>\n        </div>\n      </section>\n    ');case 1:case"end":return t.stop()}}),t)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){J(i,n,o,a,u,"next",t)}function u(t){J(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"bindEvents",value:function(t){this.form=document.getElementById("register-form"),this.nameInput=document.getElementById("name"),this.emailInput=document.getElementById("email"),this.passwordInput=document.getElementById("password"),this.submitButton=document.getElementById("submit-button"),this.form&&this.form.addEventListener("submit",(function(e){e.preventDefault(),t.onRegisterSubmit()}))}},{key:"getFormData",value:function(){return{name:this.nameInput?this.nameInput.value:"",email:this.emailInput?this.emailInput.value:"",password:this.passwordInput?this.passwordInput.value:""}}},{key:"showLoading",value:function(){this.submitButton&&(this.submitButton.disabled=!0,this.submitButton.textContent="Mendaftarkan...")}},{key:"hideLoading",value:function(){this.submitButton&&(this.submitButton.disabled=!1,this.submitButton.textContent="Daftar")}},{key:"showError",value:function(t){var e=document.getElementById("error-message");e&&(e.textContent=t)}},{key:"clearError",value:function(){var t=document.getElementById("error-message");t&&(t.textContent="")}},{key:"showSuccess",value:function(t){alert(t)}},{key:"navigateToLogin",value:function(){window.location.hash="#/login"}},{key:"afterRender",value:function(){}}],e&&Z(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function tt(){tt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==X(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(X(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function et(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function rt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){et(i,n,o,a,u,"next",t)}function u(t){et(i,n,o,a,u,"throw",t)}a(void 0)}))}}function nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ot(n.key),n)}}function ot(t){var e=function(t){if("object"!=X(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X(e)?e:e+""}const it=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(n=rt(tt().mark((function t(){return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",'\n        <section class="container">\n          <div class="about-container">\n            <h1 class="about-title" tabindex="0">Tentang StoryApp</h1>\n  \n            <div class="about-description">\n              <p>StoryApp adalah platform di mana kamu bisa membagikan cerita lengkap dengan lokasi.</p>\n  \n              <p class="mt-2">Aplikasi ini dibuat sebagai proyek submission untuk kelas Pengembangan Web Intermediate di Dicoding.</p>\n  \n              <h2 class="mt-3">Fitur</h2>\n              <ul>\n                <li>Melihat cerita dari pengguna lain</li>\n                <li>Melihat lokasi cerita di peta</li>\n                <li>Membagikan ceritamu sendiri dengan gambar dan lokasi</li>\n                <li>Memotret langsung menggunakan kamera</li>\n              </ul>\n  \n              <h2 class="mt-3">Teknologi yang Digunakan</h2>\n              <ul>\n                <li>HTML, CSS, dan JavaScript</li>\n                <li>Webpack untuk modul bundling</li>\n                <li>Leaflet untuk integrasi peta</li>\n                <li>MediaDevices API untuk akses kamera</li>\n                <li>View Transitions API untuk transisi halaman yang halus</li>\n              </ul>\n            </div>\n          </div>\n        </section>\n      ');case 1:case"end":return t.stop()}}),t)}))),function(){return n.apply(this,arguments)})},{key:"afterRender",value:(r=rt(tt().mark((function t(){return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("AboutView afterRender called (no actions needed).");case 1:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})}],e&&nt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}();function at(t){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},at(t)}function ut(){ut=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==at(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(at(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function st(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lt(n.key),n)}}function lt(t){var e=function(t){if("object"!=at(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==at(e)?e:e+""}const ht=function(){return e=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=null,this.geocoderControl=null,this.mapContainerId="map-view",this.loadingElement=null,this.containerElement=null},r=[{key:"render",value:(n=ut().mark((function t(){var e;return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=!!c(),t.abrupt("return",'\n      <section class="container" id="map-page-container">\n        <h1 tabindex="0">Lokasi Cerita</h1>\n         '.concat("\n        ",e?'\n          <div id="'.concat(this.mapContainerId,'" class="map-view-container mt-3">\n             ','\n          </div>\n          <div id="map-loading" class="loading" style="display: none;">\n              <div class="loading-spinner"></div>\n          </div>\n          <div id="map-error" class="error-container" style="display: none;"></div>\n        '):'\n          <div class="text-center mt-4" id="login-prompt">\n            <p>Silakan login untuk melihat lokasi cerita</p>\n            <a href="#/login" class="btn btn-accent mt-2">Login Sekarang</a>\n          </div>\n        ',"\n      </section>\n    "));case 2:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){st(i,r,o,a,u,"next",t)}function u(t){st(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"getMapContainerId",value:function(){return this.mapContainerId}},{key:"initializeMap",value:function(e,r){var n=document.getElementById(this.mapContainerId);if(!n||this.map)return console.warn("Map container not found or map already initialized."),!1;if(n.innerHTML="","undefined"==typeof L)return console.error("Leaflet (L) is not defined. Make sure it's loaded before initializing the map."),this.showError("Komponen peta gagal dimuat."),!1;try{return this.map=L.map(n).setView(e,r),L.tileLayer(t.MAP_TILE_URL,{attribution:t.MAP_ATTRIBUTION,maxZoom:19}).addTo(this.map),console.log("MapView: Leaflet map initialized successfully."),!0}catch(t){return console.error("Error initializing Leaflet map:",t),this.showError("Gagal menginisialisasi peta."),!1}}},{key:"addGeocoder",value:function(t){if(this.map)if(void 0!==L.Control.Geocoder){if(this.geocoderControl){try{this.map.removeControl(this.geocoderControl),console.log("MapView: Removed existing geocoder control.")}catch(t){console.warn("Could not remove previous geocoder control:",t)}this.geocoderControl=null}try{this.geocoderControl=L.Control.geocoder({defaultMarkGeocode:!0,collapsed:!1,placeholder:"Cari lokasi atau alamat...",errorMessage:"Lokasi tidak ditemukan."}).addTo(this.map),console.log("MapView: Geocoder control added to map."),t&&"function"==typeof t?(this.geocoderControl.on("markgeocode",(function(e){console.log("MapView: markgeocode event triggered",e),t(e)})),console.log("MapView: Event listener attached to geocoder.")):console.warn("MapView: No valid callback provided for geocoder results. Search will center map but presenter won't be notified.")}catch(t){console.error("Error adding Geocoder control:",t)}}else console.error("L.Control.Geocoder is not defined. Make sure the plugin is loaded.");else console.error("Cannot add geocoder: Map not initialized.")}},{key:"addMarkers",value:function(t){var e=this;if(this.map){this.map.eachLayer((function(t){t instanceof L.Marker&&e.map.removeLayer(t),t instanceof L.Popup&&e.map.closePopup(t)})),console.log("MapView: Adding markers for ".concat(Object.keys(t).length," locations."));var r=L.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]});Object.values(t).forEach((function(t){if(0!==t.length){var n=t[0],o=n.lat,i=n.lon;if("number"==typeof o&&"number"==typeof i){var a=L.marker([o,i],{icon:r}).addTo(e.map),u=t.map((function(t){return'<div class="popup-slide">\n                 <img src="'.concat(t.photoUrl,'" alt="').concat(t.name||"Story Image",'" loading="lazy" />\n                 <h4>').concat(t.name||"Tanpa Nama","</h4>\n                 <p>").concat(t.description||"Tanpa Deskripsi","</p>\n               </div>")})).join(""),s='\n         <div class="popup-detail">\n           <div class="popup-header">\n             <p class="popup-coords">Lat: '.concat(o.toFixed(5),", Lon: ").concat(i.toFixed(5),'</p>\n           </div>\n           <div class="carousel-detail">\n             ').concat(u,"\n             ").concat(t.length>1?'<button class="carousel-prev"></button><button class="carousel-next"></button>':"","\n           </div>\n         </div>\n       ");a.bindPopup(s,{maxWidth:300,className:"story-popup",autoPanPadding:[20,20]}),a.on("popupopen",(function(t){e._setupCarousel(t.popup.getElement())}))}else console.warn("Invalid coordinates for story group:",t[0])}}))}else console.warn("Cannot add markers: Map not initialized.")}},{key:"_setupCarousel",value:function(t){var e=null==t?void 0:t.querySelector(".carousel-detail");if(e){var r=e.querySelectorAll(".popup-slide"),n=e.querySelector(".carousel-prev"),o=e.querySelector(".carousel-next"),i=0;if(r.length<=1)return n&&(n.style.display="none"),o&&(o.style.display="none"),void(1===r.length&&(r[0].style.display="block"));n&&(n.style.display="block"),o&&(o.style.display="block");var a=function(t){r.forEach((function(e,r){e.style.display=r===t?"block":"none"}))};a(i);var u=n.cloneNode(!0);n.parentNode.replaceChild(u,n),u.addEventListener("click",(function(){i=(i-1+r.length)%r.length,a(i)}));var s=o.cloneNode(!0);o.parentNode.replaceChild(s,o),s.addEventListener("click",(function(){i=(i+1)%r.length,a(i)}))}}},{key:"fitMapToBounds",value:function(e){if(!this.map||!Array.isArray(e)||0===e.length)return console.warn("Cannot fit map to bounds: Map not ready or bounds invalid/empty.",e),void(this.map&&this.map.setView(t.DEFAULT_MAP_CENTER,5));try{console.log("MapView: Fitting map to bounds:",e),this.map.fitBounds(e,{padding:[40,40],maxZoom:16})}catch(e){console.error("Error fitting map bounds:",e),this.map.setView(t.DEFAULT_MAP_CENTER,5)}}},{key:"centerMapAt",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;this.map&&"number"==typeof t&&"number"==typeof e?(console.log("MapView: Centering map at [".concat(t,", ").concat(e,"] with zoom ").concat(r)),this.map.setView([t,e],r)):console.warn("Cannot center map: Map not ready or coordinates invalid.")}},{key:"showLoading",value:function(){this.loadingElement=this.loadingElement||document.getElementById("map-loading"),this.loadingElement&&(this.loadingElement.style.display="flex");var t=document.getElementById(this.mapContainerId),e=document.getElementById("map-error");t&&(t.style.display="none"),e&&(e.style.display="none")}},{key:"hideLoading",value:function(){this.loadingElement=this.loadingElement||document.getElementById("map-loading"),this.loadingElement&&(this.loadingElement.style.display="none");var t=document.getElementById(this.mapContainerId);t&&this.map&&(t.style.display="block")}},{key:"showError",value:function(t){var e=document.getElementById("map-error"),r=document.getElementById(this.mapContainerId),n=document.getElementById("map-loading");e&&(e.innerHTML="<h2>Gagal Memuat Peta</h2><p>".concat(t||"Terjadi kesalahan tidak diketahui.",'</p> <a href="#/" class="btn mt-2">Kembali</a>'),e.style.display="block"),r&&(r.style.display="none"),n&&(n.style.display="none")}},{key:"afterRender",value:function(){this.containerElement=document.getElementById("map-page-container")}},{key:"cleanup",value:function(){if(this.map){if(console.log("Cleaning up MapView..."),this.geocoderControl){try{this.map.removeControl(this.geocoderControl)}catch(t){console.warn("Could not properly remove geocoder control:",t)}this.geocoderControl=null}this.map.off(),this.map.remove(),this.map=null,console.log("MapView cleanup finished.")}else console.log("MapView cleanup: Map instance not found.")}}],r&&ct(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,o}();function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function pt(){pt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==ft(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(ft(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function dt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function vt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){dt(i,n,o,a,u,"next",t)}function u(t){dt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mt(n.key),n)}}function mt(t){var e=function(t){if("object"!=ft(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ft(e)?e:e+""}function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function wt(){wt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==gt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(gt(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function bt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){bt(i,n,o,a,u,"next",t)}function u(t){bt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function kt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xt(n.key),n)}}function xt(t){var e=function(t){if("object"!=gt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gt(e)?e:e+""}function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function St(){St=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==_t(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(_t(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function jt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Ot(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jt(i,n,o,a,u,"next",t)}function u(t){jt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tt(n.key),n)}}function Tt(t){var e=function(t){if("object"!=_t(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_t(e)?e:e+""}function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Ct(){Ct=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==It(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(It(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function Lt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Gt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Lt(i,n,o,a,u,"next",t)}function u(t){Lt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Nt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bt(n.key),n)}}function Bt(t){var e=function(t){if("object"!=It(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}var Mt={saveCredentials:function(e){try{var r={token:e.token,name:e.name,userId:e.userId};return localStorage.setItem(t.AUTH_KEY,JSON.stringify(r)),r}catch(t){return console.error("Error saving credentials to localStorage:",t),null}},getCredentials:function(){try{var e=localStorage.getItem(t.AUTH_KEY);return e?JSON.parse(e):null}catch(t){return null}},clearCredentials:function(){localStorage.removeItem(t.AUTH_KEY)}};function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Ft(){Ft=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==At(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(At(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function Dt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Dt(i,n,o,a,u,"next",t)}function u(t){Dt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vt(n.key),n)}}function Vt(t){var e=function(t){if("object"!=At(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function zt(){zt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==Ht(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ht(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function Kt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wt(n.key),n)}}function Wt(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Jt(){Jt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==Yt(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Yt(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function Zt(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function Qt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Zt(i,n,o,a,u,"next",t)}function u(t){Zt(i,n,o,a,u,"throw",t)}a(void 0)}))}}function $t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xt(n.key),n)}}function Xt(t){var e=function(t){if("object"!=Yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yt(e)?e:e+""}var te={"/":{View:O,Presenter:function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e,this.api={getStories:v},this.auth={getToken:c}},e=[{key:"init",value:(n=vt(pt().mark((function t(){return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.getToken()){t.next=3;break}return console.log("Home page: User not logged in."),t.abrupt("return");case 3:return this.view.showLoading(),t.next=6,this.loadStories();case 6:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"loadStories",value:(r=vt(pt().mark((function t(){var e;return pt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.getStories();case 3:if(!(e=t.sent).error){t.next=6;break}throw new Error(e.message||"Gagal mengambil data cerita.");case 6:e.listStory&&0!==e.listStory.length?this.view.displayStories(e.listStory):this.view.showEmpty(),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error loading stories for home page:",t.t0),this.view.showError(t.t0.message||"Tidak dapat memuat cerita.");case 13:return t.prev=13,t.finish(13);case 15:case"end":return t.stop()}}),t,this,[[0,9,13,15]])}))),function(){return r.apply(this,arguments)})}],e&&yt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}()},"/detail/:id":{View:N,Presenter:function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e,this.api={getDetailStory:m}},e=[{key:"init",value:(n=Et(wt().mark((function t(){var e,r=arguments;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(r.length>0&&void 0!==r[0]?r[0]:{}).id){t.next=5;break}return this.view.showError("ID Cerita tidak valid atau tidak ditemukan."),t.abrupt("return");case 5:return this.view.showLoading(),t.next=8,this.loadStoryDetail(e);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"loadStoryDetail",value:(r=Et(wt().mark((function t(e){var r,n;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.getDetailStory(e);case 3:if(!(r=t.sent).error){t.next=6;break}throw new Error(r.message||"Gagal mengambil detail cerita.");case 6:if(n=r.story){t.next=9;break}throw new Error("Data cerita tidak ditemukan setelah request berhasil.");case 9:this.view.displayStoryDetail(n)&&this.view.displayMap(n),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error("Error loading story detail:",t.t0),this.view.showError(t.t0.message||"Tidak dapat memuat detail cerita.");case 17:return t.prev=17,t.finish(17);case 19:case"end":return t.stop()}}),t,this,[[0,13,17,19]])}))),function(t){return r.apply(this,arguments)})}],e&&kt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}()},"/add":{View:U,Presenter:function(){return e=function e(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{addStory:w};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!r)throw new Error("AddPresenter requires a view instance.");this.view=r,this.api=n,this.config=t,this.mediaStream=null,this.photoBlob=null,this.locationCoords=null,console.log("AddPresenter created")},r=[{key:"init",value:(i=Ot(St().mark((function t(){return St().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("AddPresenter init started");try{"function"==typeof this.view.afterRender?this.view.afterRender():console.warn("View does not have an afterRender method."),this.view.initializeMap(this.config.DEFAULT_MAP_CENTER,this.config.DEFAULT_MAP_ZOOM,this.config.MAP_TILE_URL,this.config.MAP_ATTRIBUTION),this.view.addMapClickListener(this.onMapClicked.bind(this)),this.view.addGeocoder(this.onLocationGeocoded.bind(this)),this.view.bindEvents(this),this.view.setCameraButtonsState({start:!0,capture:!1,retake:!1}),this.view.clearError(),console.log("AddPresenter init finished successfully")}catch(t){console.error("Error during AddPresenter initialization:",t),this.view.showError("Gagal menginisialisasi halaman tambah cerita: ".concat(t.message)),this.view.form&&(this.view.form.style.display="none")}case 2:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onStartCamera",value:(o=Ot(St().mark((function t(){var e;return St().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.mediaStream){t.next=3;break}return console.warn("Camera already started."),t.abrupt("return");case 3:return this._stopMediaStream(),this.photoBlob=null,this.view.clearPreview(),console.log("Attempting to start camera..."),t.prev=7,t.next=10,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1});case 10:this.mediaStream=t.sent,console.log("Camera stream obtained."),this.view.setCameraButtonsState({start:!1,capture:!1,retake:!1}),this.view.showCameraPreview(this.mediaStream),t.next=24;break;case 16:t.prev=16,t.t0=t.catch(7),console.error("Error accessing camera:",t.t0),"Gagal mengakses kamera.",e="NotAllowedError"===t.t0.name?"Izin akses kamera ditolak. Silakan izinkan di pengaturan browser.":"NotFoundError"===t.t0.name||"DevicesNotFoundError"===t.t0.name?"Tidak ada kamera yang ditemukan di perangkat ini.":"NotReadableError"===t.t0.name?"Kamera sedang digunakan oleh aplikasi lain atau terjadi error hardware.":"Gagal memulai kamera: ".concat(t.t0.message||t.t0.name),this.view.showError(e),this._stopMediaStream(),this.view.setCameraButtonsState({start:!0,capture:!1,retake:!1});case 24:case"end":return t.stop()}}),t,this,[[7,16]])}))),function(){return o.apply(this,arguments)})},{key:"onCapturePhoto",value:function(){var t,e=this,r=null===(t=this.view.previewElement)||void 0===t?void 0:t.querySelector("video");if(!r)return console.error("Capture failed: Video element not found in preview."),void this.view.showError("Gagal mengambil foto: Pratinjau video tidak ditemukan.");if(r.readyState<r.HAVE_METADATA)return console.warn("Capture attempted before video metadata was ready."),void this.view.showError("Pratinjau kamera belum siap, coba lagi sesaat.");if(0===r.videoWidth||0===r.videoHeight)return console.error("Capture failed: Video dimensions are zero."),void this.view.showError("Gagal mengambil foto: Dimensi video tidak valid.");console.log("Capturing photo...");var n=document.createElement("canvas");n.width=r.videoWidth,n.height=r.videoHeight;var o=n.getContext("2d");try{o.drawImage(r,0,0,n.width,n.height),n.toBlob((function(t){if(t){console.log("Photo captured successfully, blob created."),e.photoBlob=t;var r=URL.createObjectURL(t);e.view.showImagePreview(r),e._stopMediaStream(),e.view.setCameraButtonsState({start:!1,capture:!1,retake:!0})}else console.error("Failed to create blob from canvas."),e.view.showError("Gagal memproses gambar setelah diambil."),e.view.setCameraButtonsState({start:!1,capture:!0,retake:!1})}),"image/jpeg",.9)}catch(t){console.error("Error drawing video to canvas or creating blob:",t),this.view.showError("Terjadi kesalahan saat memproses gambar: ".concat(t.message)),this._stopMediaStream(),this.view.setCameraButtonsState({start:!0,capture:!1,retake:!1})}}},{key:"onRetakePhoto",value:function(){console.log("Retake/delete photo requested."),this._stopMediaStream(),this.photoBlob=null,this.view.clearPreview(),this.view.setCameraButtonsState({start:!0,capture:!1,retake:!1}),console.log("Preview cleared and buttons reset.")}},{key:"onFileSelected",value:function(t){if(console.log("File selected:",t.name,t.type),!t.type.startsWith("image/"))return console.warn("Invalid file type selected:",t.type),this.view.showError("File yang dipilih bukan gambar. Silakan pilih file JPG, PNG, GIF, dll."),this.view.clearPreview(),this.photoBlob=null,void this.view.setCameraButtonsState({start:!0,capture:!1,retake:!1});this._stopMediaStream(),this.photoBlob=t;var e=URL.createObjectURL(t);this.view.showImagePreview(e),this.view.setCameraButtonsState({start:!1,capture:!1,retake:!0}),console.log("Image preview shown for selected file.")}},{key:"onMapClicked",value:function(t,e){console.log("Map clicked at: Lat ".concat(t,", Lon ").concat(e)),this._updateLocation(t,e)}},{key:"onLocationGeocoded",value:function(t,e){console.log("Location geocoded to: Lat ".concat(t,", Lon ").concat(e)),this._updateLocation(t,e,16)}},{key:"onCoordsChanged",value:function(t,e){console.log("Coordinates manually changed to: Lat ".concat(t,", Lon ").concat(e)),this.locationCoords&&this.locationCoords.lat.toFixed(7)===t.toFixed(7)&&this.locationCoords.lon.toFixed(7)===e.toFixed(7)?console.log("Manual coordinates match current state, no map update needed."):(console.log("Manual coordinates differ from current state, updating map."),this._updateLocation(t,e))}},{key:"onFormSubmit",value:(n=Ot(St().mark((function t(){var e,r,n,o;return St().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("Form submission initiated."),this.view.clearError(),e=this.view.getDescription(),r=[],e||r.push("Deskripsi tidak boleh kosong."),this.photoBlob?this.photoBlob.size>1e6&&(console.warn("Photo size exceeds limit: ".concat(this.photoBlob.size," bytes")),r.push("Ukuran foto terlalu besar (Maks: ".concat(1,"MB). Harap kompres atau pilih foto lain."))):r.push("Foto belum dipilih atau diambil."),this.locationCoords?(isNaN(this.locationCoords.lat)||isNaN(this.locationCoords.lon))&&r.push("Koordinat lokasi tidak valid."):r.push("Lokasi belum dipilih dari peta atau pencarian."),!(r.length>0)){t.next=11;break}return console.error("Form validation failed:",r),this.view.showError(r.join("\n")),t.abrupt("return");case 11:return console.log("Form validation passed. Proceeding with submission."),this.view.showLoading(),t.prev=13,n={description:e,photo:this.photoBlob,lat:this.locationCoords.lat,lon:this.locationCoords.lon},console.log("Submitting story data:",{description:n.description,photo_size:n.photo.size,lat:n.lat,lon:n.lon}),t.next=18,this.api.addStory(n);case 18:if(o=t.sent,console.log("API addStory response:",o),!o||!o.error){t.next=22;break}throw new Error(o.message||"Gagal mengunggah cerita dari server.");case 22:this.view.navigateToHome(),t.next=29;break;case 25:t.prev=25,t.t0=t.catch(13),console.error("Error submitting story:",t.t0),this.view.showError(t.t0.message||"Terjadi kesalahan saat mengunggah cerita.");case 29:return t.prev=29,this.view.hideLoading(),console.log("Submission process finished (success or failure)."),t.finish(29);case 33:case"end":return t.stop()}}),t,this,[[13,25,29,33]])}))),function(){return n.apply(this,arguments)})},{key:"_updateLocation",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(isNaN(t)||isNaN(e))return console.error("Invalid coordinates provided to _updateLocation:",t,e),void this.view.showError("Koordinat yang diterima tidak valid.");this.locationCoords={lat:t,lon:e},console.log("Internal location state updated:",this.locationCoords),this.view.updateMapLocation(t,e,r),this.view.updateLocationDisplay("Lokasi dipilih: ".concat(t.toFixed(5),", ").concat(e.toFixed(5))),this.view.updateCoordInputs(t,e)}},{key:"_stopMediaStream",value:function(){this.mediaStream&&(console.log("Stopping media stream tracks."),this.mediaStream.getTracks().forEach((function(t){t.stop(),console.log("Track stopped: ".concat(t.kind," (").concat(t.label,")"))})),this.mediaStream=null,console.log("Media stream stopped and cleared."),this.photoBlob?this.view.setCameraButtonsState({start:!1,capture:!1,retake:!0}):this.view.setCameraButtonsState({start:!0,capture:!1,retake:!1}))}},{key:"destroy",value:function(){console.log("AddPresenter destroy initiated."),this._stopMediaStream(),"function"==typeof this.view.cleanup?this.view.cleanup():console.warn("View does not have a cleanup method."),this.photoBlob=null,this.locationCoords=null,console.log("AddPresenter destroy finished.")}}],r&&Pt(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,o,i}()},"/login":{View:q,Presenter:function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e,this.api={login:p},this.authService=Mt},e=[{key:"init",value:(n=Gt(Ct().mark((function t(){return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.view.bindEvents(this);case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onLoginSubmit",value:(r=Gt(Ct().mark((function t(){var e,r,n;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.view.getFormData(),this.view.clearError(),e.email&&e.password){t.next=5;break}return this.view.showError("Email dan kata sandi tidak boleh kosong."),t.abrupt("return");case 5:return this.view.showLoading(),t.prev=6,t.next=9,this.api.login({email:e.email,password:e.password});case 9:if(!(r=t.sent).error){t.next=12;break}throw new Error(r.message||"Login gagal.");case 12:if(n=this.authService.saveCredentials(r.loginResult)){t.next=15;break}throw new Error("Gagal menyimpan sesi login.");case 15:navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"AUTH_TOKEN",token:n.token,name:n.name,userId:n.userId}),this.view.navigateToHome(),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(6),console.error("Kesalahan saat login:",t.t0),this.view.showError(t.t0.message||"Terjadi kesalahan saat mencoba masuk.");case 23:return t.prev=23,this.view.hideLoading(),t.finish(23);case 26:case"end":return t.stop()}}),t,this,[[6,19,23,26]])}))),function(){return r.apply(this,arguments)})}],e&&Nt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}()},"/register":{View:$,Presenter:function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e,this.registerApiCall=h},e=[{key:"init",value:(n=Ut(Ft().mark((function t(){return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.view.bindEvents(this);case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"onRegisterSubmit",value:(r=Ut(Ft().mark((function t(){var e,r;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.view.getFormData(),this.view.clearError(),this.view.showLoading(),e.name&&e.email&&e.password){t.next=7;break}return this.view.showError("Semua field harus diisi."),this.view.hideLoading(),t.abrupt("return");case 7:if(!(e.password.length<8)){t.next=11;break}return this.view.showError("Kata sandi minimal 8 karakter."),this.view.hideLoading(),t.abrupt("return");case 11:return t.prev=11,t.next=14,this.registerApiCall({name:e.name,email:e.email,password:e.password});case 14:if(!(r=t.sent).error){t.next=17;break}throw new Error(r.message);case 17:this.view.showSuccess("Pendaftaran berhasil! Silakan login."),this.view.navigateToLogin(),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(11),console.error("Kesalahan saat mendaftar:",t.t0),this.view.showError(t.t0.message||"Terjadi kesalahan saat mendaftar.");case 25:return t.prev=25,this.view.hideLoading(),t.finish(25);case 28:case"end":return t.stop()}}),t,this,[[11,21,25,28]])}))),function(){return r.apply(this,arguments)})}],e&&Rt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}()},"/about":{View:it,Presenter:function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e},e=[{key:"init",value:(r=zt().mark((function t(){return zt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("AboutPresenter init called (no actions needed).");case 1:case"end":return t.stop()}}),t)})),n=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){Kt(i,n,o,a,u,"next",t)}function u(t){Kt(i,n,o,a,u,"throw",t)}a(void 0)}))},function(){return n.apply(this,arguments)})},{key:"destroy",value:function(){console.log("AboutPresenter destroy called (no actions needed).")}}],e&&qt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,n}()},"/map":{View:ht,Presenter:function(){return e=function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.view=r,this.api={getStories:v},this.config=t,this.auth={getToken:c}},r=[{key:"init",value:(o=Qt(Jt().mark((function t(){return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.auth.getToken()){t.next=3;break}return console.log("Map page: User not logged in."),t.abrupt("return");case 3:if(this.view.showLoading(),!this.view.initializeMap(this.config.DEFAULT_MAP_CENTER,5)){t.next=11;break}return this.view.addGeocoder(this.handleLocationFound.bind(this)),t.next=9,this.loadStoriesAndPopulateMap();case 9:t.next=12;break;case 11:this.view.hideLoading();case 12:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"loadStoriesAndPopulateMap",value:(n=Qt(Jt().mark((function t(){var e,r,n;return Jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.api.getStories();case 3:if(!(e=t.sent).error){t.next=6;break}throw new Error(e.message||"Gagal mengambil data cerita.");case 6:if(e.listStory&&0!==e.listStory.length){t.next=10;break}return console.log("Tidak ada cerita dengan lokasi ditemukan."),this.view.hideLoading(),t.abrupt("return");case 10:r=this._groupStoriesByLocation(e.listStory),n=this._calculateBounds(r),this.view.addMarkers(r),this.view.fitMapToBounds(n),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("Error loading stories for map:",t.t0),this.view.showError(t.t0.message||"Tidak dapat memuat data lokasi cerita.");case 20:return t.prev=20,this.view.hideLoading(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[0,16,20,23]])}))),function(){return n.apply(this,arguments)})},{key:"handleLocationFound",value:function(t){if(t&&t.geocode&&t.geocode.center){var e=t.geocode.center,r=e.lat,n=e.lng,o=t.geocode.name;console.log("Geocoder found: ".concat(o," at [").concat(r,", ").concat(n,"]")),this.view.centerMapAt(r,n,15),this.view.map&&L.popup().setLatLng([r,n]).setContent(o||"Hasil Pencarian").openOn(this.view.map)}else console.warn("Geocoder event received without valid coordinates:",t)}},{key:"_groupStoriesByLocation",value:function(t){var e={};return t.forEach((function(t){if(null!=t.lat&&null!=t.lon&&"number"==typeof t.lat&&"number"==typeof t.lon){var r="".concat(t.lat.toFixed(5),",").concat(t.lon.toFixed(5));e[r]||(e[r]=[]),e[r].push(t)}})),e}},{key:"_calculateBounds",value:function(t){var e=[];return Object.values(t).forEach((function(t){t.length>0&&null!=t[0].lat&&null!=t[0].lon&&e.push([t[0].lat,t[0].lon])})),e}},{key:"destroy",value:function(){console.log("Destroying MapPresenter..."),this.view&&"function"==typeof this.view.cleanup&&this.view.cleanup()}}],r&&$t(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,o}()}},ee=function(t){return te[t]||null};function re(t){var e=t.replace(/^\/|\/$/g,"").split("/");return 1===e.length&&""===e[0]?{resource:null,id:null}:{resource:e[0]||null,id:e[1]||null}}function ne(t){var e="";return t.resource&&(e=e.concat("/".concat(t.resource))),t.id&&(e=e.concat("/:id")),e||"/"}function oe(){var t=location.hash.replace("#","");return""===t?"/":t.startsWith("/")?t:"/".concat(t)}function ie(t){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(t)}function ae(){ae=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==ie(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(ie(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function ue(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function se(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ue(i,n,o,a,u,"next",t)}function u(t){ue(i,n,o,a,u,"throw",t)}a(void 0)}))}}function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,le(n.key),n)}}function le(t){var e=function(t){if("object"!=ie(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ie(e)?e:e+""}function he(t,e,r){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,r)}function fe(t,e){return t.get(de(t,e))}function pe(t,e,r){return t.set(de(t,e),r),r}function de(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var ve=new WeakMap,ye=new WeakMap,me=new WeakMap,ge=new WeakMap,we=new WeakMap;const be=function(){return t=function t(e){var r=e.navigationDrawer,n=e.drawerButton,o=e.content,i=e.skipToContent;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,ve,null),he(this,ye,null),he(this,me,null),he(this,ge,null),he(this,we,null),pe(ve,this,o),pe(ye,this,n),pe(me,this,r),pe(ge,this,i),this._setupDrawer(),this._setupSkipToContent()},e=[{key:"_setupDrawer",value:function(){var t,e,r=this;null===(t=fe(ye,this))||void 0===t||t.addEventListener("click",(function(t){var e;t.stopPropagation(),null===(e=fe(me,r))||void 0===e||e.classList.toggle("open")})),document.body.addEventListener("click",(function(t){var e,n;null===(e=fe(me,r))||void 0===e||!e.classList.contains("open")||fe(me,r).contains(t.target)||null!==(n=fe(ye,r))&&void 0!==n&&n.contains(t.target)||fe(me,r).classList.remove("open")})),null===(e=fe(me,this))||void 0===e||e.addEventListener("click",(function(t){"A"!==t.target.tagName&&"BUTTON"!==t.target.tagName||fe(me,r).classList.remove("open")}))}},{key:"_setupSkipToContent",value:function(){var t,e=this;null===(t=fe(ge,this))||void 0===t||t.addEventListener("click",(function(t){var r;t.preventDefault(),null===(r=fe(ve,e))||void 0===r||r.focus()}))}},{key:"_updateNavigation",value:function(){var t=!!c(),e=document.getElementById("auth-nav"),r=document.getElementById("user-nav"),n=document.getElementById("user-nav-2");e&&e.classList.toggle("hidden",t),r&&r.classList.toggle("hidden",!t),n&&n.classList.toggle("hidden",!t);var o=document.getElementById("logout-btn");o&&!o.listenerAttached&&(o.addEventListener("click",(function(){localStorage.removeItem("storyapp_auth"),window.location.hash="#/",window.location.reload()})),o.listenerAttached=!0)}},{key:"renderPage",value:(r=se(ae().mark((function t(){var e,r,n,o,i,a,u,s,l,h,f=this;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(fe(we,this)&&"function"==typeof fe(we,this).destroy&&(console.log("Destroying previous presenter:",fe(we,this).constructor.name),fe(we,this).destroy(),pe(we,this,null)),this._updateNavigation(),e=ne(re(oe())),r=re(oe()),n=ee(e),t.prev=5,n){t.next=10;break}return fe(ve,this).innerHTML='<h2>404 - Halaman Tidak Ditemukan</h2> <a href="#/">Kembali ke Beranda</a>',console.warn("No page config found for route pattern: ".concat(e)),t.abrupt("return");case 10:if(!["/add","/detail/:id","/map"].some((function(t){return e===t||t.endsWith("/:id")&&e.startsWith(t.split("/:id")[0])}))||c()){t.next=16;break}return console.log("Access denied to ".concat(e,". Redirecting to login.")),window.location.hash="#/login",t.abrupt("return");case 16:if(i=n.View,a=n.Presenter,u=new i,s=new a(u),pe(we,this,s),l=function(){var t=se(ae().mark((function t(){return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(fe(ve,f)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,u.render(r);case 4:return fe(ve,f).innerHTML=t.sent,t.next=7,u.afterRender(r);case 7:return t.next=9,s.init(r);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),!document.startViewTransition){t.next=33;break}return h=document.startViewTransition(l),t.prev=23,t.next=26,h.finished;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(23),console.error("View Transition error:",t.t0);case 31:t.next=35;break;case 33:return t.next=35,l();case 35:null===(o=fe(ve,this))||void 0===o||o.focus(),t.next=43;break;case 38:t.prev=38,t.t1=t.catch(5),console.error("Error rendering page for route ".concat(e,":"),t.t1),fe(ve,this).innerHTML='<div class="error-container">\n        <h2>Oops! Terjadi Kesalahan</h2>\n        <p>Gagal memuat halaman. Coba beberapa saat lagi.</p>\n        <p style="font-size: 0.8em; color: grey;">Detail: '.concat(t.t1.message||"Tidak ada detail",'</p>\n        <a href="#/" class="btn mt-2">&larr; Kembali ke Beranda</a>\n      </div>'),pe(we,this,null);case 43:case"end":return t.stop()}}),t,this,[[5,38],[23,28]])}))),function(){return r.apply(this,arguments)})}],e&&ce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function ke(){ke=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r,n){return Object.defineProperty(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n})}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(e,r,n,o){var i=r&&r.prototype instanceof f?r:f,a=Object.create(i.prototype);return s(a,"_invoke",function(e,r,n){var o=1;return function(i,a){if(3===o)throw Error("Generator is already running");if(4===o){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var s=E(u,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(1===o)throw o=4,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=3;var c=l(e,r,n);if("normal"===c.type){if(o=n.done?4:2,c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=4,n.method="throw",n.arg=c.arg)}}}(e,n,new _(o||[])),!0),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var h={};function f(){}function p(){}function d(){}var v={};s(v,i,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(S([])));m&&m!==r&&n.call(m,i)&&(v=m);var g=d.prototype=f.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==Ee(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}var o;s(this,"_invoke",(function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}),!0)}function E(e,r){var n=r.method,o=e.i[n];if(o===t)return r.delegate=null,"throw"===n&&e.i.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=l(o,e.i,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var a=i.arg;return a?a.done?(r[e.r]=a.value,r.next=e.n,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function k(t){this.tryEntries.push(t)}function x(e){var r=e[4]||{};r.type="normal",r.arg=t,e[4]=r}function _(t){this.tryEntries=[[-1]],t.forEach(k,this),this.reset(!0)}function S(e){if(null!=e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Ee(e)+" is not iterable")}return p.prototype=d,s(g,"constructor",d),s(d,"constructor",p),p.displayName=s(d,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},w(b.prototype),s(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(g),s(g,u,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.unshift(n);return function t(){for(;r.length;)if((n=r.pop())in e)return t.value=n,t.done=!1,t;return t.done=!0,t}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(t){a.type="throw",a.arg=e,r.next=t}for(var o=r.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i[4],u=this.prev,s=i[1],c=i[2];if(-1===i[0])return n("end"),!1;if(!s&&!c)throw Error("try statement without catch or finally");if(null!=i[0]&&i[0]<=u){if(u<s)return this.method="next",this.arg=t,n(s),!0;if(u<c)return n(c),!1}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n[0]>-1&&n[0]<=this.prev&&this.prev<n[2]){var o=n;break}}o&&("break"===t||"continue"===t)&&o[0]<=e&&e<=o[2]&&(o=null);var i=o?o[4]:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o[2],h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[2]===t)return this.complete(r[4],r[3]),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r[0]===t){var n=r[4];if("throw"===n.type){var o=n.arg;x(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={i:S(e),r,n},"next"===this.method&&(this.arg=t),h}},e}function xe(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function _e(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){xe(i,n,o,a,u,"next",t)}function u(t){xe(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Se(t){var e={userVisibleOnly:!0,applicationServerKey:function(t){for(var e=(t+"=".repeat(1)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(e),n=new Uint8Array(r.length),o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}("BCCs2eonMI-6H2ctvFaWg-UYdDv387Vno_bzUzALpB442r2lCnsHmtrx8biyPi_E-1fSGABK_Qs_GlvPoJJqxbk")};return t.pushManager.subscribe(e).then((function(t){return console.log("User is subscribed:",t),fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})})).catch((function(t){console.error("Failed to subscribe the user: ",t)}))}document.addEventListener("DOMContentLoaded",_e(ke().mark((function t(){var e;return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.startViewTransition||console.log("View Transitions API tidak didukung oleh browser ini."),e=new be({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer"),skipToContent:document.querySelector("#skip-to-content")}),t.next=4,e.renderPage();case 4:window.addEventListener("hashchange",_e(ke().mark((function t(){return ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.renderPage();case 2:case"end":return t.stop()}}),t)})))),"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js").then((function(t){console.log("ServiceWorker registration successful with scope: ",t.scope),Se(t)})).catch((function(t){console.log("ServiceWorker registration failed: ",t)}))}));case 6:case"end":return t.stop()}}),t)}))))})();